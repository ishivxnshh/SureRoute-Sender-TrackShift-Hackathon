# ğŸ—ï¸ SureRoute Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         User's Browser                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   React Frontend (Port 3000)              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Left Panel â”‚  â”‚ Canvas Area  â”‚  â”‚  Right Panel    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Components â”‚  â”‚ Priority     â”‚  â”‚  Inspector      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Library    â”‚  â”‚ Lanes        â”‚  â”‚  Telemetry      â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚          Bottom Panel (Metrics & Simulator)           â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â”‚ HTTP/REST + WebSocket             â”‚
â”‚                              â–¼                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              â–¼                                   â”‚
â”‚                  Backend Server (Port 5000)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Express REST API                        â”‚  â”‚
â”‚  â”‚  /api/transfer/*  /api/agent/*  /api/simulator/*         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    â–¼                                       â”‚  â”‚
â”‚  â”‚            Socket.IO Server                                â”‚  â”‚
â”‚  â”‚  Events: transfer:update, telemetry, agent:suggest       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Transfer Engine Core                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Chunking   â”‚  â”‚  Verificationâ”‚  â”‚  Assembly       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Logic      â”‚  â”‚  (SHA-256)   â”‚  â”‚  & Storage      â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  AI Agent System                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚   Monitor    â”‚  â”‚  Scheduler   â”‚  â”‚   Recovery   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚   Agent      â”‚  â”‚   Agent      â”‚  â”‚   Agent      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ - Telemetry  â”‚  â”‚ - Priority   â”‚  â”‚ - Failures   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ - Anomalies  â”‚  â”‚ - Queue Mgmt â”‚  â”‚ - Retry Logicâ”‚   â”‚  â”‚
â”‚  â”‚  â”‚ - Suggestionsâ”‚  â”‚ - Concurrencyâ”‚  â”‚ - Failover   â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            Transport Manager                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  WiFi   â”‚  â”‚ Bluetooth â”‚  â”‚   Relay Server         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Primary â”‚  â”‚ Secondary â”‚  â”‚   Fallback             â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚              â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚              â”‚
                        â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                                    â”‚
                        â–¼                                    â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   File System   â”‚              â”‚   Relay Server      â”‚
              â”‚   Storage       â”‚              â”‚   (Port 5001)       â”‚
              â”‚                 â”‚              â”‚                     â”‚
              â”‚  /storage/      â”‚              â”‚  Store & Forward    â”‚
              â”‚    /chunks/     â”‚              â”‚  Chunk Cache        â”‚
              â”‚    /files/      â”‚              â”‚  /relay-storage/    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow: File Transfer

```
1. User Action
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User drops file     â”‚
â”‚ onto priority lane  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
2. Frontend Processing
   â”‚
   â”œâ”€â”€â–º Calculate file hash
   â”œâ”€â”€â–º Split into chunks (1MB each)
   â”œâ”€â”€â–º Generate SHA-256 per chunk
   â””â”€â”€â–º Create manifest
           â”‚
           â–¼
3. API Call
   â”‚
   POST /api/transfer/create
   {
     file_name: "document.pdf",
     file_size: 10485760,
     chunk_size: 1048576,
     chunks: ["sha256_0", "sha256_1", ...],
     priority: "high"
   }
           â”‚
           â–¼
4. Backend Processing
   â”‚
   â”œâ”€â”€â–º Create transfer record
   â”œâ”€â”€â–º Initialize chunk status
   â”œâ”€â”€â–º Notify AI agents
   â””â”€â”€â–º Return transfer ID
           â”‚
           â–¼
5. Chunk Upload Loop
   â”‚
   For each missing chunk:
   â”‚
   POST /api/upload/:transferId/:chunkIndex
   (multipart/form-data)
           â”‚
           â–¼
6. Chunk Verification
   â”‚
   â”œâ”€â”€â–º Receive chunk data
   â”œâ”€â”€â–º Calculate SHA-256 hash
   â”œâ”€â”€â–º Compare with manifest
   â”œâ”€â”€â–º Update chunk status
   â””â”€â”€â–º Broadcast progress
           â”‚
           â–¼
7. Real-time Updates
   â”‚
   WebSocket Events:
   â”‚
   â”œâ”€â”€â–º transfer:update (progress, speed, ETA)
   â”œâ”€â”€â–º chunk:update (per-chunk status)
   â”œâ”€â”€â–º telemetry (network metrics)
   â””â”€â”€â–º agent:suggest (AI recommendations)
           â”‚
           â–¼
8. Completion
   â”‚
   All chunks verified?
   â”‚
   Yes â”€â”€â”€â”€â”€â–º Assemble file
   â”‚          Verify integrity
   â”‚          Notify completion
   â”‚
   No â”€â”€â”€â”€â”€â”€â–º Continue uploading
              Handle failures
              Retry if needed
```

---

## AI Agent Interaction Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Transfer Active                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Telemetry Generator â”‚
                    â”‚  (Every 2 seconds)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚              â”‚              â”‚
                â–¼              â–¼              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Monitor  â”‚  â”‚ Scheduler â”‚  â”‚ Recovery  â”‚
         â”‚  Agent    â”‚  â”‚  Agent    â”‚  â”‚  Agent    â”‚
         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
               â”‚              â”‚              â”‚
               â–¼              â–¼              â–¼
        Analyze RTT    Optimize Queue   Track Failures
        Packet Loss    Priority Mgmt    Retry Logic
        Bandwidth      Concurrency      Failover
               â”‚              â”‚              â”‚
               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚              â”‚
                      â–¼              â–¼
              Conditions Met?   Pattern Detected?
                      â”‚              â”‚
                 Yes  â”‚         Yes  â”‚  No
                      â–¼              â””â”€â”€â”€â”€â–º Continue Monitoring
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Generate Suggestion â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  WebSocket: agent:suggest  â”‚
         â”‚  {                         â”‚
         â”‚    agent: "Monitor",       â”‚
         â”‚    action: "reduce_chunk", â”‚
         â”‚    reason: "High RTT..."   â”‚
         â”‚  }                         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Frontend Receives â”‚
         â”‚   Shows in AI Panel â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                     â”‚
         â–¼                     â–¼
    Manual Mode          Autonomous Mode
    User Decides         Auto-Apply
         â”‚                     â”‚
         â–¼                     â–¼
    Accept/Reject        Apply Immediately
         â”‚                     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Update Settings    â”‚
         â”‚   Adjust Parameters  â”‚
         â”‚   Log Action         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Network Resilience Flow

```
Normal Operation
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Transfer    â”‚
â”‚ Active      â”‚
â”‚ (Chunks     â”‚
â”‚ Uploading)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
Network Event Detected
       â”‚
       â”œâ”€â”€â”€â–º High Latency?
       â”‚         â”‚
       â”‚         â””â”€â”€â–º AI: Reduce chunk size
       â”‚
       â”œâ”€â”€â”€â–º Packet Loss?
       â”‚         â”‚
       â”‚         â””â”€â”€â–º AI: Decrease concurrency
       â”‚
       â”œâ”€â”€â”€â–º Connection Drop?
       â”‚         â”‚
       â”‚         â–¼
       â”‚    Save State
       â”‚         â”‚
       â”‚         â–¼
       â”‚    Set Status: Paused
       â”‚         â”‚
       â”‚         â–¼
       â”‚    Wait for Reconnection
       â”‚         â”‚
       â”‚         â–¼
       â”‚    Connection Restored?
       â”‚         â”‚
       â”‚     Yes â”‚  No
       â”‚         â–¼   â””â”€â”€â–º Keep Waiting
       â”‚    POST /api/manifest/check
       â”‚         â”‚
       â”‚         â–¼
       â”‚    Get Missing Chunks
       â”‚         â”‚
       â”‚         â–¼
       â”‚    Resume Upload
       â”‚         â”‚
       â”‚         â””â”€â”€â”€â”€â”€â”€â”
       â”‚                â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚
                        â–¼
              Continue Transfer
```

---

## Transport Failover Mechanism

```
Start Transfer
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Use WiFi     â”‚ â—„â”€â”€â”€â”€ Primary
â”‚ (Default)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
Monitor Connection
       â”‚
       â”œâ”€â”€â”€â–º Good? â”€â”€â”€â”€ Continue WiFi
       â”‚
       â””â”€â”€â”€â–º Bad?
             â”‚
             â–¼
       Check Delay Tolerance
       (e.g., 20 seconds)
             â”‚
         Exceeded?
             â”‚
             â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Switch Transportâ”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚
        â–¼               â–¼
   WiFi Failed?    Bluetooth?
        â”‚               â”‚
        â”‚           Available?
        â”‚               â”‚
        â”‚               â–¼
        â”‚          Try Bluetooth
        â”‚               â”‚
        â”‚          â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
        â”‚          â”‚         â”‚
        â”‚        Works?     Fails?
        â”‚          â”‚         â”‚
        â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Use Relay    â”‚ â—„â”€â”€â”€â”€ Fallback
                    â”‚ Server       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  Store-and-Forward
                  (Guaranteed Delivery)
                           â”‚
                           â–¼
                    Wait for Better
                    Network & Sync
```

---

## Component Hierarchy (React)

```
App.jsx
â”‚
â”œâ”€â”€ TopBar.jsx
â”‚   â”œâ”€â”€ Connection Status
â”‚   â”œâ”€â”€ Environment Toggle
â”‚   â””â”€â”€ Control Buttons
â”‚
â”œâ”€â”€ Main Container
â”‚   â”‚
â”‚   â”œâ”€â”€ LeftPanel.jsx
â”‚   â”‚   â”œâ”€â”€ Component Library
â”‚   â”‚   â”œâ”€â”€ Search Box
â”‚   â”‚   â””â”€â”€ Quick Actions
â”‚   â”‚
â”‚   â”œâ”€â”€ Canvas.jsx
â”‚   â”‚   â”œâ”€â”€ Canvas Nodes
â”‚   â”‚   â”‚   â””â”€â”€ CanvasNode.jsx (multiple)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Priority Lanes
â”‚   â”‚       â”œâ”€â”€ PriorityLane.jsx (High)
â”‚   â”‚       â”‚   â””â”€â”€ TransferCard.jsx (multiple)
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ PriorityLane.jsx (Normal)
â”‚   â”‚       â”‚   â””â”€â”€ TransferCard.jsx (multiple)
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ PriorityLane.jsx (Low)
â”‚   â”‚           â””â”€â”€ TransferCard.jsx (multiple)
â”‚   â”‚
â”‚   â””â”€â”€ RightPanel.jsx
â”‚       â”œâ”€â”€ Inspector Tabs
â”‚       â”œâ”€â”€ Details View
â”‚       â”œâ”€â”€ ChunkMap.jsx
â”‚       â”œâ”€â”€ TelemetryGraph.jsx
â”‚       â””â”€â”€ AISuggestions.jsx
â”‚
â””â”€â”€ BottomPanel.jsx
    â”œâ”€â”€ Activity Feed
    â”œâ”€â”€ Global Metrics
    â””â”€â”€ Network Simulator
```

---

## State Management (Zustand)

```
Global Store
â”‚
â”œâ”€â”€ Connection State
â”‚   â”œâ”€â”€ connectionStatus
â”‚   â”œâ”€â”€ activeTransports
â”‚   â””â”€â”€ environment
â”‚
â”œâ”€â”€ Canvas State
â”‚   â”œâ”€â”€ canvasNodes[]
â”‚   â””â”€â”€ selectedNode
â”‚
â”œâ”€â”€ Transfer State
â”‚   â”œâ”€â”€ transfers[]
â”‚   â””â”€â”€ activeTransfer
â”‚
â”œâ”€â”€ AI State
â”‚   â”œâ”€â”€ aiSuggestions[]
â”‚   â””â”€â”€ automationLevel
â”‚
â”œâ”€â”€ Telemetry State
â”‚   â””â”€â”€ telemetry{}
â”‚
â””â”€â”€ Simulator State
    â””â”€â”€ simulatorSettings{}
```

---

## File Structure

```
SureRoute/
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ TopBar.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LeftPanel.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Canvas.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CanvasNode.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PriorityLane.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TransferCard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RightPanel.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ChunkMap.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TelemetryGraph.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AISuggestions.jsx
â”‚   â”‚   â”‚   â””â”€â”€ BottomPanel.jsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ api.js
â”‚   â”‚   â”‚   â””â”€â”€ websocket.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ store.js
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â””â”€â”€ main.jsx
â”‚   â”‚
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ server.js
â”‚   â”‚   â”œâ”€â”€ agents.js
â”‚   â”‚   â””â”€â”€ generate-test-data.js
â”‚   â”‚
â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”œâ”€â”€ chunks/
â”‚   â”‚   â””â”€â”€ files/
â”‚   â”‚
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ relay-server/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ relay.js
â”‚   â”‚
â”‚   â”œâ”€â”€ relay-storage/
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ README.md
â”œâ”€â”€ DEMO_SCRIPT.md
â”œâ”€â”€ QUICKSTART.md
â”œâ”€â”€ COMPLETE_GUIDE.md
â”œâ”€â”€ PROJECT_SUMMARY.md
â”œâ”€â”€ ARCHITECTURE.md
â”‚
â”œâ”€â”€ setup.bat
â”œâ”€â”€ start-all.bat
â”œâ”€â”€ .gitignore
â””â”€â”€ package.json
```

---

## Technology Stack

### Frontend
- **Framework**: React 18
- **Build Tool**: Vite
- **State Management**: Zustand
- **Drag & Drop**: React DnD
- **Charts**: Recharts
- **Icons**: Lucide React
- **HTTP Client**: Axios
- **WebSocket**: Socket.IO Client

### Backend
- **Runtime**: Node.js
- **Framework**: Express
- **WebSocket**: Socket.IO
- **File Upload**: Multer
- **Hashing**: Crypto (SHA-256)
- **UUID**: uuid library

### DevOps
- **Package Manager**: npm
- **Process Manager**: Nodemon (dev)
- **Concurrency**: Concurrently
- **Version Control**: Git

---

## Security Considerations

```
Frontend
   â”‚
   â”œâ”€â”€â–º HTTPS (Production)
   â”œâ”€â”€â–º CORS Configured
   â””â”€â”€â–º Input Validation
   
Backend
   â”‚
   â”œâ”€â”€â–º File Type Validation
   â”œâ”€â”€â–º Size Limits
   â”œâ”€â”€â–º Hash Verification (SHA-256)
   â”œâ”€â”€â–º Rate Limiting (Add for production)
   â””â”€â”€â–º Authentication (Add for production)

Storage
   â”‚
   â”œâ”€â”€â–º Isolated Directories
   â”œâ”€â”€â–º Temp File Cleanup
   â””â”€â”€â–º Access Controls (OS-level)

Network
   â”‚
   â”œâ”€â”€â–º WebSocket Authentication (Add)
   â”œâ”€â”€â–º TLS/SSL (Production)
   â””â”€â”€â–º Token-based Auth (Add)
```

---

This architecture provides:
âœ… Scalability
âœ… Resilience
âœ… Real-time Updates
âœ… Intelligent Optimization
âœ… Clean Separation of Concerns
âœ… Extensibility
